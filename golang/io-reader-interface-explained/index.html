<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The io.Reader interface | yourbasic.org </title>
  <link rel="stylesheet" href="/style.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
  <link rel="icon" type="image/png" href="/res/favicon-16x16.png">
  <link rel="icon" type="image/png" href="/res/favicon-32x32.png">
  <link rel="icon" type="image/png" href="/res/favicon-96x96.png">
  <meta name="description" content="How to read byte streams in Go.">
  <meta name="keywords" content="go, golang, Reader, interface, read, byte stream, buffer, scanner">
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31906484-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script>
</head>

<body>
<header>
  <nav>
    <ul>
      <li><a href="/about/">About</a></li>
      <li><a href="/">Home</a></li>
      <li><a href="/algorithms/">Algorithms</a></li>
      <li><a href="/golang/">Go</a></li>
    </ul>
  </nav>
</header>

<main>
<article>
<h1>The io.Reader interface</h1>
<div class="tagline">yourbasic.org</div>


<p>The <a href="https://golang.org/pkg/io/#Reader"><code>io.Reader</code></a> interface represents an entity from which you can read a stream of bytes.</p>

<pre><code>type Reader interface {
        Read(buf []byte) (n int, err error)
}
</code></pre>

<p><code>Read</code> reads up to <code>len(buf)</code> bytes into <code>buf</code> and returns the number of bytes read &ndash;
it returns an <a href="https://golang.org/pkg/io/#pkg-variables"><code>io.EOF</code></a> error when the stream ends.</p>

<h2 id="example">Example</h2>

<p>The standard library provides numerous Reader <a href="https://golang.org/search?q=Read#Global">implementations</a> (including in-memory byte buffers, files and network connections), and Readers are accepted as input by many utilities (including the HTTP client and server implementations).</p>

<p>As an example, you can create a Reader from a string using the <a href="https://golang.org/pkg/strings/#Reader"><code>strings.Reader</code></a> function and then pass the Reader directly to the <a href="https://golang.org/pkg/net/http/#Post"><code>http.Post</code></a> function in package <a href="https://golang.org/pkg/net/http/"><code>net/http</code></a>.
The Reader is then used as the source for the data to be posted.</p>

<pre><code>r := strings.NewReader(&quot;my request&quot;)
resp, err := http.Post(&quot;http://foo.bar&quot;,
	&quot;application/x-www-form-urlencoded&quot;, r)
</code></pre>

<p>Since <code>http.Post</code> uses a Reader instead of a <code>[]byte</code> it&rsquo;s trivial to, for instance, use the contents of a file.</p>

<h2 id="reading-directly-from-a-byte-stream">Reading directly from a byte stream</h2>

<p>You can use the <code>Read</code> function directly (this is the least common use case).</p>

<pre><code>r := strings.NewReader(&quot;abcde&quot;)

buf := make([]byte, 4)
for {
	n, err := r.Read(buf)
	fmt.Println(n, err, buf[:n])
	if err == io.EOF {
		break
	}
}
</code></pre>

<pre><code>4 &lt;nil&gt; [97 98 99 100]
1 &lt;nil&gt; [101]
0 EOF []
</code></pre>

<p>Use <a href="https://golang.org/pkg/io/#ReadFull"><code>io.ReadFull</code></a> to read exactly <code>len(buf)</code> bytes into <code>buf</code>:</p>

<pre><code>r := strings.NewReader(&quot;abcde&quot;)

buf := make([]byte, 4)
if _, err := io.ReadFull(r, buf); err != nil {
	log.Fatal(err)
}
fmt.Println(buf)

if _, err := io.ReadFull(r, buf); err != nil {
	fmt.Println(err)
}
</code></pre>

<pre><code>[97 98 99 100]
unexpected EOF
</code></pre>

<p>Use <a href="https://golang.org/pkg/io/ioutil/#ReadAll"><code>ioutil.ReadAll</code></a> to read everything:</p>

<pre><code>r := strings.NewReader(&quot;abcde&quot;)

buf, err := ioutil.ReadAll(r)
if err != nil {
	log.Fatal(err)
}
fmt.Println(buf)
</code></pre>

<pre><code>[97 98 99 100 101]
</code></pre>

<h2 id="buffered-reading-and-scanning">Buffered reading and scanning</h2>

<p>The <a href="https://golang.org/pkg/bufio/#Reader"><code>bufio.Reader</code></a> and <a href="https://golang.org/pkg/bufio/#Scanner"><code>bufio.Scanner</code></a> types wrap a Reader creating another Reader that also implements the interface but provides buffering and some help for textual input.</p>

<p>In this example we use a <a href="https://golang.org/pkg/bufio/#Scanner"><code>bufio.Scanner</code></a>
to count the number of words in a text.</p>

<pre><code>const input = `Beware of bugs in the above code;
I have only proved it correct, not tried it.`

scanner := bufio.NewScanner(strings.NewReader(input))
scanner.Split(bufio.ScanWords) <span class="comment">// Set the split function.</span>

count := 0
for scanner.Scan() {
    count++
}
if err := scanner.Err(); err != nil {
    fmt.Println(err)
}
fmt.Println(count)</code></pre>

<pre><code>16
</code></pre>

</article>

<aside>



  <h2>Related</h2>

  <div class="reference">
    <a href="/golang/io-writer-interface-explained/">The io.Writer interface</a><br />
    <span class="source"></span>
  </div>

  <div class="reference">
    <a href="https://medium.com/go-walkthrough/go-walkthrough-io-package-8ac5e95a9fbd">Go Walkthrough: io package</a><br />
    <span class="source"></span>
    <span class="author">Ben Johnson</span>
  </div>


  <h2>New in Go 1.10</h2>
  <ul class="none">
  
    <li><a href="/golang/build-append-concatenate-strings-efficiently/">Build and concatenate strings efficiently</a></li>

    <li><a href="/golang/round-float-to-int/">Round float to integer value</a></li>

    <li><a href="/golang/shuffle-slice-array/">Shuffle slice or array</a></li>

  </ul>

  <h2>Top Go articles</h2>
  <ul class="none">
  
    <li><a href="/golang/gotcha/">Go gotcha</a></li>

    <li><a href="/golang/string-functions-reference-cheat-sheet/">String handling cheat sheet</a></li>

    <li><a href="/golang/slices-explained/">Slices in a nutshell</a></li>

    <li><a href="/golang/maps-explained/">Maps in a nutshell</a></li>

    <li><a href="/golang/concurrent-programming/">Concurrent programming</a></li>

  </ul>
  <p><a href="/golang/"><strong>See all 198 Go articles</strong></a></p>
</aside>
</main>

<footer>
  This work is licensed under&nbsp;a&nbsp;<a rel="license" alt="CC BY 3.0"
  href="http://creativecommons.org/licenses/by/3.0/"><span
  style="font-size:smaller;">CC&nbsp;BY&nbsp;3.0</span>&nbsp;license</a>.
</footer>
</body>
</html>
