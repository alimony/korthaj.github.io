<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bitmasks and flags | yourbasic.org </title>
  <meta name="description" content="How to use a bitmask to represent a set of flags in Go.">
  
  <link rel="stylesheet" href="/style.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
  <link rel="icon" type="image/png" href="/res/favicon-16x16.png">
  <link rel="icon" type="image/png" href="/res/favicon-32x32.png">
  <link rel="icon" type="image/png" href="/res/favicon-96x96.png">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113104149-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-113104149-1');
  </script>

</head>

<body>
<header>
  <nav>
    <ul>
      <li><a href="/about/">About</a></li>
      <li><a href="/" title="Your Basic Homepage">Home</a></li>
      <li><a href="/algorithms/">Algorithms</a></li>
      <li><a href="/golang/">Go</a></li>
    </ul>
  </nav>
</header>

<main>
<article>
<h1>Bitmasks and flags</h1>
<div class="tagline">yourbasic.org</div>


<p class="lead">A bitmask is a small set of booleans, often called flags, represented by the bits in a single number.</p>

<pre><code>type Bits uint8

const (
    F0 Bits = 1 << iota
    F1
    F2
)

func Set(b, flag Bits) Bits    { return b | flag }
func Clear(b, flag Bits) Bits  { return b &^ flag }
func Toggle(b, flag Bits) Bits { return b ^ flag }
func Has(b, flag Bits) bool    { return b&flag != 0 }

func main() {
    var b Bits
    b = Set(b, F0)
    b = Toggle(b, F2)
    for i, flag := range []Bits{F0, F1, F2} {
        fmt.Println(i, Has(b, flag))
    }
}</code></pre>

<pre><code>0 true
1 false
2 true
</code></pre>

<h2 id="larger-bit-sets">Larger bit sets</h2>

<p>To represent larger sets of bits, you may want to use a custom data structure.
The external package <a href="https://godoc.org/github.com/yourbasic/bit"><code>bit</code></a>
provides a bit array implementation and some utility bit functions.</p>

<p>Because a bit array uses bit-level parallelism, limits memory access, and efficiently uses the data cache, it often outperforms other data structures.
Here is an example that shows how to create the set of all primes less than <i>n</i>
in <i>O</i>(<i>n</i>&nbsp;log&nbsp;log&nbsp;<i>n</i>) time using the <a href="https://godoc.org/github.com/yourbasic/bit#Set"><code>bit.Set</code></a> data structure from package <a href="https://godoc.org/github.com/yourbasic/bit"><code>bit</code></a>.
Try the code with <i>n</i> equal to a few hundred millions and be pleasantly surprised.</p>

<pre><code><span class="comment">// Sieve of Eratosthenes</span>
const n = 50
sieve := bit.New().AddRange(2, n)
sqrtN := int(math.Sqrt(n))
for p := 2; p <= sqrtN; p = sieve.Next(p) {
    for k := p * p; k < n; k += p {
        sieve.Delete(k)
    }
}
fmt.Println(sieve)
</code></pre>

<pre><code>{2 3 5 7 11 13 17 19 23 29 31 37 41 43 47}
</code></pre>


</article>
<aside>

    
  <h2>Related</h2>

  <div class="reference">
    <a href="/golang/bitwise-operator-cheat-sheet/">Bitwise operators cheat sheet</a><br />
    <span class="source">yourbasic.org</span>
  </div>

  <div class="reference">
    <a href="/golang/iota/">iota</a><br />
    <span class="source">yourbasic.org</span>
  </div>

  <div class="reference">
    <a href="/golang/define-enumeration-string/">Enumeration with string representation</a><br />
    <span class="source">yourbasic.org</span>
  </div>

  <div class="reference">
    <a href="/algorithms/your-basic-int/">Your basic int: a most powerful data type</a><br />
    <span class="source">yourbasic.org</span>
  </div>

<h2>New in Go 1.10</h2>
  <ul class="none">
    <li><a href="/golang/build-append-concatenate-strings-efficiently/">Build and concatenate strings efficiently</a></li>

    <li><a href="/golang/round-float-to-int/">Round float to integer value</a></li>

    <li><a href="/golang/shuffle-slice-array/">Shuffle a slice or array</a></li>

  </ul>

  <h2>Top Go articles</h2>
  <ul class="none">
  
    <li><a href="/golang/gotcha/">Go gotcha</a></li>

    <li><a href="/golang/string-functions-reference-cheat-sheet/">String handling cheat sheet</a></li>

    <li><a href="/golang/slices-explained/">Slices in a nutshell</a></li>

    <li><a href="/golang/maps-explained/">Maps in a nutshell</a></li>

    <li><a href="/golang/concurrent-programming/">Concurrent programming</a></li>

  </ul>
  <p><a href="/golang/"><strong>See all 198 Go articles</strong></a></p>
</aside>
</main>

<footer>
  This work is licensed under&nbsp;a&nbsp;<a rel="license" alt="CC BY 3.0"
  href="http://creativecommons.org/licenses/by/3.0/"><span
  style="font-size:smaller;">CC&nbsp;BY&nbsp;3.0</span>&nbsp;license</a>.
</footer>
</body>
</html>
